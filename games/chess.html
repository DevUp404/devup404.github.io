<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="keywords" content="HTML, CSS, JavaScript">
	<meta name="description" content="Sobre elemento de HTML">
	<meta name="author" content="Elias">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="../style/style_one.css">
	<title>Chess</title>
  <style>
    .black {
      background-color: black;
	  width: 30px;
	  height: 30px;
    }
    .white {
      background-color: white;
	  width: 30px;
	  height: 30px;
    }
  </style>
</head>
<body>
  <div>
    <button onclick="loadTable()">Load!</button>
    <table id="chessTab" style="border: 1px solid black; border-spacing: 0px;"></table>
  </div>
  
  <hr>
  Las imagenes usadas aqu√≠ fueron descargadas en: <a href="http://todovector.com/vector/deportes/ajedrez/">todovector.com</a>
  <script>
	// Variables:
	
	// Creadores:
	
	function sAppend(a, b) {
		return a + b;
	}
	
	function setAttr(field, value) {
		return " " + field + "= " + value;
	}
	
	function createStyleAttrList() {
		var attrData;// i.e: color: blue; width: 4px; field: value;
		for (var i = 0; i < arguments.length; i++) {
			attrData += arguments[i];
		}
		return attrData;// color: blue; width: 4px; field: value;
	}
	
	function createDiv(numId) {
	var elId = "div" + numId;// ondrop=\"drop(event)\" ondragover=\"allowDrop(event)\"
	var styleAttrs = "background-color:transparent;width:60px;height:60px;";
	var attrList = setAttr("id", elId) + setAttr("style", styleAttrs) + setAttr("ondrop", "drop(event)") + setAttr("ondragover", "allowDrop(event)");
		return "<div" + attrList + "> </div>";
	}
	
	function createTD(numId, color) {
		return "<td" + setAttr("class", color) + ">" + createDiv(numId++) + "</td>";
//		return "<td" + setAttr("id", elId) + ">" + createDiv(numId) + "</td>";
	}
	
	function createRow(colorA, colorB, numeroId) {
		// @numeroId = 1 - inicialmente. Luego: 9, 17, 25, 33, 41, 49, 57.
		//alert(numeroId);
		var row = "<tr>";
		for (var i = 0; i < 8; i++) {
			if (i % 2 == 0) {
				row += createTD(numeroId, colorA);
			} else {
				row += createTD(numeroId, colorB);
			}
			numeroId++;
		}
		row += "</tr>";
		return row;
	}
  
     function createRows() {
		var tableRows = ["1", "2", "3", "4", "5", "6", "7", "8"];
		var contador = 1;
        for(var i = 0; i < 8; i++) {
			if (i % 2 == 0) {
				tableRows[i] = createRow("white", "black", contador);
			} else {
				tableRows[i] = createRow("black", "white", contador);
			}
			contador += 8;
        }
        return tableRows;
      }
	  
	  function loadTable() {
		var chessTable = document.getElementById("chessTab");
		var tablero = "";
		var tableRows = createRows();
		
		for (var i = 0; i < tableRows.length; i++) {
			tablero += tableRows[i];
		}
		chessTable.innerHTML = tablero;
		alert("Se ha construido el tablero");
		addImg();
	  }
	  
	  function addImg() {
		const campos = document.getElementsByClassName("field");
		alert(campos.length);
		var line;
		for (var i = 0; i < campos.length; i++) {
			line = "<div id= \"div" + i + "\" ondrop=\"drop(event)\" ondragover=\"allowDrop(event)\"></div>";
			campos[i].innerHTML = line;
		}
		document.getElementById("div1").innerHTML = "<img src=\"http://todovector.com/vector/deportes/ajedrez/peon/17.png\" draggable=\"true\" ondragstart=\"drag(event)\" id=\"drag1\" width=\"60\" height=\"60\">";
		//document.getElementById("drag1").style.width = "25px";
		//document.getElementById("drag1").style.height = "25px";
	  }
	  
	function allowDrop(ev) {
		ev.preventDefault();
	}

	function drag(ev) {
		ev.dataTransfer.setData("text", ev.target.id);
	}

	function drop(ev) {
		ev.preventDefault();
		var data = ev.dataTransfer.getData("text");
		ev.target.appendChild(document.getElementById(data));
	}
	
	// OBJETOS:
	
	const rey = {
		nombre: "Rey",
		textura: "<img src=\"../media/images/chess/peon-white.png\" draggable=\"true\" ondragstart=\"drag(event)\" id=\"drag1\" width=\"60\" height=\"60\">"
	};
	
	const directorioRaiz = "../media/images/chess/";
	class Pieza {
		constructor(nombre, id, imagen) {
			this.nombre = nombre;
			this.id = id;
			this.imagen = imagen;
		}
		
	}
	
	const reyBlanco = new Pieza("Rey", 1, directorioRaiz + "rey-white.png");
	
  </script>

</script>
</body>
</html>
