<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="keywords" content="HTML, CSS, JavaScript">
	<meta name="description" content="Sobre elemento de HTML">
	<meta name="author" content="Elias">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="style/style_one.css">
	<title>HTML SSE API</title>
</head>
<body>

<a href="index.html">Home.</a>/<a href="apislist.html">Volver.</a>/<a href="web_workers_API.html">Anterior.</a>

<hr>
	<h1>HTML SSE API</h1>

<hr>
	<p>Server-Sent Events (SSE) allow a web page to get updates from a server.</p>

<hr>
	<h2>Server-Sent Events - One Way Messaging</h2>
	
	<p>
		A server-sent event is when a web page automatically gets updates from a server.<br>
		<br>
		This was also possible before, but the web page would have to ask if any updates 
		were available. With server-sent events, the updates come automatically.<br>
		<br>
		Examples: Facebook/Twitter updates, stock price updates, news feeds, sport results, etc.
	</p>

<hr>
	<h2>Browser Support</h2>
	
	<p>The numbers in the table specify the first browser version that fully support server-sent events.</p>
	
	<table>
		<tr>
			<td>API</td>
			<td><img src="https://www.w3schools.com/images/compatible_chrome.png" alt="compatible_chrome"></td>
			<td><img src="https://www.w3schools.com/images/compatible_edge.png" alt="compatible_edge"></td>
			<td><img src="https://www.w3schools.com/images/compatible_firefox.png" alt="compatible_firefox"></td>
			<td><img src="https://www.w3schools.com/images/compatible_safari.png" alt="compatible_safari"></td>
			<td><img src="https://www.w3schools.com/images/compatible_opera.png" alt="compatible_opera"></td>
		</tr>
		<tr>
			<td>SSE</td>
			<td>6.0</td>
			<td>79.0</td>
			<td>6.0</td>
			<td>5.0</td>
			<td>11.5</td>
		</tr>
	<table>

<hr>
	<h2>Receive Server-Sent Event Notifications</h2>
	
	<p>The EventSource object is used to receive server-sent event notifications:</p>
	<!-- 
	----   Implement code box with:   ----
	
	<h1>Getting server updates</h1>
	<div id="result"></div>
	
	<script>
		if(typeof(EventSource) !== "undefined") {
			var source = new EventSource("demo_sse.php");
			source.onmessage = function(event) {
				document.getElementById("result").innerHTML += event.data + "<br>";
			};
		} else {
			document.getElementById("result").innerHTML = "Sorry, your browser does not support server-sent events...";
		}
	</script>
	
	Example explained:

		- Create a new EventSource object, and specify the URL of the page sending 
			the updates (in this example "demo_sse.php")
		- Each time an update is received, the onmessage event occurs
		- When an onmessage event occurs, put the received data into the element 
			with id="result".
	-->

<hr>
	<h2>Check Server-Sent Events Support</h2>
	
	<p>In the tryit example above there were some extra lines of code to check browser support for server-sent events:</p>

<!--
	-- CODE BOX --
	
	if(typeof(EventSource) !== "undefined") {
		// Yes! Server-sent events support!
		// Some code.....
	} else {
		// Sorry! No server-sent events support..
	}  -->

<hr>
	<h2>Server-Side Code Example</h2>
	
	<p>
		For the example above to work, you need a server capable of sending data updates (like PHP or ASP).<br>
		<br>
		The server-side event stream syntax is simple. Set the "Content-Type" header to "text/event-stream". Now you can start sending event streams.
	</p>

	<p>Code in PHP (demo_sse.php):</p>
	<!--
	-- CODE BOX --
	
	 <?php
		header('Content-Type: text/event-stream');
		header('Cache-Control: no-cache');

		$time = date('r');
		echo "data: The server time is: {$time}\n\n";
		flush();
	?>  -->
	
	<p>Code in ASP (VB) (demo_sse.asp):</p>
	
	<!--
	-- CODE BOX --
	
	<%
		Response.ContentType = "text/event-stream"
		Response.Expires = -1
		Response.Write("data: The server time is: " & now())
		Response.Flush()
	%> -->

<!--
	Code explained:

		- Set the "Content-Type" header to "text/event-stream"
		- Specify that the page should not cache.
		- Output the data to send (Always start with "data: ")
		- Flush the output data back to the web page.
-->
<hr>
	<h2>The EventSource Object</h2>
	
	<p>In the examples above we used the onmessage event to get messages. But other events are also available:</p>
	
	<table>
		<tr>
			<th>Events</th>
			<th>Description</th>
		</tr>
		<tr>
			<td>onopen</td>
			<td>When a connection to the server is opened</td>
		</tr>
		<tr>
			<td>onmessage</td>
			<td>When a message is received</td>
		</tr>
		<tr>
			<td>onerror</td>
			<td>When an error occurs</td>
		</tr>
	</table>

<hr>

<a href="index.html">Home.</a>/<a href="apislist.html">Volver.</a>/<a href="web_workers_API.html">Anterior.</a>/<a href="https://www.w3schools.com/html/html_examples.asp">End.</a>/

<hr>
</body>
</html>