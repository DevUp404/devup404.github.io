<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="keywords" content="HTML, CSS, JavaScript">
	<meta name="description" content="Sobre elemento de HTML">
	<meta name="author" content="Elias">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="style/style_one.css">
	<title>HTML Geolocation API</title>
</head>
<body>

<a href="index.html">Home.</a>/<a href="apislist.html">Volver.</a>/<a href="drag_drop_API.html">Siguiente.</a>

<hr>
	<h1>HTML Geolocation API</h1>

<hr>
	<p>The HTML Geolocation API is used to locate a user's position.</p>

<hr>
	<h2>Locate the User's Position</h2>
	
	<p>
		The HTML Geolocation API is used to get the geographical position of a user.
		<br><br>
		Since this can compromise privacy, the position is not available unless the user approves it
	</p>

<hr>
	<h2>Using HTML Geolocation</h2>
	
	<p>
		The <mark style="color:red">getCurrentPosition()</mark> method is used to return the user's position.
		<br><br>
		The button below returns the latitude and longitude of the user's position:
	</p>
	<!-- Invokes to :script #1 -->
	<button onclick="getLocation()">Try It</button>

	<p id="demo"></p>
	
	<ul style="border:2px solid black;background-color:#A9A9A9;">
		<caption>Example explained:</caption>
		
		<li>Check if Geolocation is supported</li>
		<li>If supported, run the getCurrentPosition() method. If not, display a message to the user</li>
		<li>If the <mark style="background-color:#FFE4C4;">getCurrentPosition()</mark> method is successful, it returns a coordinates object to the function specified in the parameter (showPosition)</li>
		<li>the <mark style="background-color:#FFE4C4;">showPosition()</mark> function outputs the Latitude and Longitude</li>
	</ul>
	
	<p>The example above is a very basic Geolocation script, with no error handling.</p>

<hr>
	<h2>Handling Errors and Rejections</h2>
	
	<p>
		The second parameter of the <mark style="background-color:#FFE4C4;">getCurrentPosition()</mark> method is used to handle errors. 
		It specifies a function to run if it fails to get the user's location:
	</p>

<hr>
	<h2>Location-specific Information</h2>
	
	<p>This page has demonstrated how to show a user's position on a map.</p>
	
	<ul style="border:2px solid black;background-color:#A9A9A9;">
		<caption>Geolocation is also very useful for location-specific information, like:</caption>
		
		<li>Up-to-date local information</li>
		<li>Showing Points-of-interest near the user</li>
		<li>Turn-by-turn navigation (GPS)</li>
	</ul>

<hr>
	<h2>The getCurrentPosition() Method - Return Data</h2>
	
	<p>
		The <mark style="background-color:#FFE4C4;">getCurrentPosition()</mark> method returns an object on success. 
		The latitude, longitude and accuracy properties are always returned. 
		The other properties are returned if available:
	</p>
	
	<div style="background-color:#9932CC;  border: 2px solid black;">
		<table>
			<tr>
				<th>Property</th>
				<th>Returns</th>
			</tr>
			<tr>
				<td>coords.latitude</td>
				<td>The latitude as a decimal number (always returned)</td>
			</tr>
			<tr>
				<td>coords.longitude</td>
				<td>The longitude as a decimal number (always returned)</td>
			</tr>
			<tr>
				<td>coords.accuracy</td>
				<td>The accuracy of position (always returned)</td>
			</tr>
			<tr>
				<td>coords.altitude</td>
				<td>The altitude in meters above the mean sea level (returned if available)</td>
			</tr>
			<tr>
				<td>coords.altitudeAccuracy</td>
				<td>The altitude accuracy of position (returned if available)</td>
			</tr>
			<tr>
				<td>coords.heading</td>
				<td>The heading as degrees clockwise from North (returned if available)</td>
			</tr>
			<tr>
				<td>coords.speed</td>
				<td>The speed in meters per second (returned if available)</td>
			</tr>
			
			<tr>
				<td>timestamp</td>
				<td>The date/time of the response (returned if available)</td>
			</tr>
		</table>
	</div>

<hr>
	<h2>Geolocation Object - Other interesting Methods</h2>
	
	<ul style="border:2px solid black;background-color:#A9A9A9;">
		<caption>The Geolocation object also has other interesting methods:</caption>
		
		<li><mark style="background-color:#FFE4C4;">watchPosition()</mark> - Returns the current position of the user and continues to 
			return updated position as the user moves (like the GPS in a car).</li>
		<li><mark style="background-color:#FFE4C4;">clearWatch()</mark> - Stops the watchPosition() method.</li>
	</ul>
	
	<p>
	The example below shows the <mark style="background-color:#FFE4C4;">watchPosition()</mark> method. 
	You need an accurate GPS device to test this (like smartphone):
	</p>

<hr>

<a href="index.html">Home.</a>/<a href="apislist.html">Volver.</a>/<a href="drag_drop_API.html">Siguiente.</a>
	
<!-- SCRIPTS AREA. -->

	<!-- script #1 -->

<script>
	var x = document.getElementById("demo");
	function getLocation() {
		if (navigator.geolocation) {
			navigator.geolocation.getCurrentPosition(showPosition, showError);
		} else {
			x.innerHTML = "Geolocation is not supported by this browser.";
		}
	}

	function showPosition(position) {
		x.innerHTML = "Latitude: " + position.coords.latitude +
		"<br>Longitude: " + position.coords.longitude;
	}
	
	function showError(error) {
		switch(error.code) {
			case error.PERMISSION_DENIED:
				x.innerHTML = "User denied the request for Geolocation."
				break;
			case error.POSITION_UNAVAILABLE:
				x.innerHTML = "Location information is unavailable."
				break;
			case error.TIMEOUT:
				x.innerHTML = "The request to get user location timed out."
				break;
			case error.UNKNOWN_ERROR:
				x.innerHTML = "An unknown error occurred."
				break;
		}
	}
	
<!--	CÃ“DIGO NO IMPLEMANTADO
<!--	var x = document.getElementById("demo");
<!--
<!--	function getLocation() {
<!--		if (navigator.geolocation) {
<!--  		navigator.geolocation.watchPosition(showPosition);
<!--  	} else { 
<!-- 		   x.innerHTML = "Geolocation is not supported by this browser.";
<!--  	}
<!--	}
<!--  
<!--	function showPosition(position) {
<!--	  x.innerHTML="Latitude: " + position.coords.latitude + 
<!-- 		"<br>Longitude: " + position.coords.longitude;
<!--	}
</script>
</body>
</html>